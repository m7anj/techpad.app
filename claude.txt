# TechPrep - AI Interview Practice Platform

## What it does:
Users practice technical interviews by having real-time voice conversations with an AI interviewer. Pick an interview type (Tech Trivia or System Design), speak your answers, AI asks follow-up questions, then get detailed feedback with a full transcript.

This is like an interactive, tech-driven HireVue where:
1. AI asks you a question (audio via OpenAI TTS)
2. You speak your answer (captured via Web Speech API)
3. AI understands what you said and can ask follow-up questions in real-time
4. You press "finish" when done with your current answer
5. AI moves to next question or gives follow-ups
6. At the end, you get detailed feedback + full transcript

Much more interactive than traditional HireVue's one-way video responses - this is a real conversation with an AI interviewer that can adapt and dig deeper based on your answers.

## Tech Stack:
- Frontend: React + Vite + TypeScript + CSS Modules
- Backend: Express + TypeScript + Prisma
- Database: PostgreSQL (Supabase)
- AI: Claude API for conversation, OpenAI TTS for voice output
- Voice Input: Web Speech API (client-side, free)
- Auth: Clerk
- Payments: Stripe

## Database Models:
- User (clerkId, email, subscription tier)
- Interview (templates with type, topic, description, system prompt)
- completedInterview (user's past interviews with score, feedback, duration)
- Message (individual AI/user exchanges during interviews, linked to completedInterview)

## Key Flow:
1. User picks interview type/topic
2. WebSocket connection to /interview/:id - creates completedInterview record
3. Voice conversation: user speaks → Web Speech API → WebSocket → followups.js generates real-time response → OpenAI TTS → play audio
4. Messages stored in-memory during session
5. End interview → save messages to DB, interviewScore.js analyzes conversation, generates feedback
6. User views transcript + feedback on results page

## Interview Architecture:
**Two-Model System:**
1. **Main Question Generator**: Thoughtful, extensively fine-tuned model that generates core interview questions (1-6) in JSON format. Stored in server memory during interview (not persisted until end).

2. **Follow-up Generator** (followups.js): Llama-3.1-8b-instant for real-time addon questions. Probes shallow answers, missing complexity analysis, vague performance claims. Ends when technical depth shown or 3+ follow-ups reached.

**Data Flow:**
- Interview questions generated and kept in memory during session
- ALL conversation data (main questions + follow-ups + user responses) persisted to database ONLY after interview completion
- No persistence during interview for performance

**Post-Interview Analysis** (interviewScore.js):
Llama-3.1-70b-versatile analyzes complete conversation data. Weighted scoring:
- Technical (40%): Algorithms, system design, complexity analysis
- Problem-solving (30%): Approach, optimization, debugging
- Communication (30%): Technical clarity, precise explanations
- Outputs: Overall score, breakdown, strengths, gaps, improvement advice

## Pricing:
- Free: 3 interviews/month (check via completedInterview count)
- Pro: �7/month unlimited

## Current Progress:
- Database schema done and migrated
- Express server setup with WebSocket support (express-ws)
- Basic routes implemented: /user/:id, /myInterviews/:userId
- WebSocket route: /interview/:id for real-time conversation flow
- AI modules: followups.js (real-time follow-ups), interviewScore.js (post-interview analysis)

Note: Some record names and db names of objects/files/methods may vary from this description but this captures the general functionality and structure.

Responses:

- No code
- Minimal answers
- Be support, not an answer sheet
- Be guidance, not a spoonfeeder
- Just talk to me.
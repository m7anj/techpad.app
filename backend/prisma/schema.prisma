datasource database {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


generator client {
  provider = "prisma-client-js"
}


model User {
  id                    String          @id @default(uuid())
  clerkId               String          @unique
  email                 String          @unique
  username              String?         @unique
  profilePicture        String?

  subTeir               String          @default("free")
  createdAt             DateTime        @default(now())
  completedInterviews   completedInterview[]
}


model completedInterview {
  id                    String        @id @default(uuid())

  userId                String
  user        User      @relation(fields: [userId], references: [id])

  interviewId           String
  interview             Interview @relation(fields: [interviewId], references: [id])

  timeTaken             Int
  score                 Float?
  feedback              Json?
  completedAt           DateTime      @default(now())
  messages              Message[]
}


model Interview {
  id                    String        @id @default(uuid())
  expectedDuration      Int                    
  type                  String
  description           String
  prompt                String        @database.Text
  topic                 String?
  
  completedInterviews   completedInterview[]
}


model Message {
  id                    String        @id @default(uuid())
  completedInterviewId  String
  completedInterview    completedInterview @relation(fields: [completedInterviewId], references: [id])
  content               String        @database.Text
  sequence              Int
  role                  String    
}